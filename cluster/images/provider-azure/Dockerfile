FROM alpine:3.19.0
RUN apk --no-cache add ca-certificates bash

ARG TARGETOS
ARG TARGETARCH
ARG CROSSPLANE_PROVIDER_VERSION

ENV USER_ID=65532
# ENV ARM_PARTNER_ID <guid>
ENV ARM_DISABLE_TERRAFORM_PARTNER_ID true

USER ${USER_ID}
EXPOSE 8080

ENTRYPOINT ["provider"]